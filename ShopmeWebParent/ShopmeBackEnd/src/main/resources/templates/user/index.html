<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" layout:decorator="template">
<head>
<meta charset="UTF-8">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
	crossorigin="anonymous">
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
	integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
	crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" type="text/css" th:href="@{/css/index.css}">
<title>Home</title>
</head>
<body>

	<div th:replace="fragment/header_footer :: header"></div>

	<div>

		<div id="carouselExampleControls" class="carousel slide"
			data-bs-ride="carousel">
			<div class="carousel-inner">
				<div class="carousel-item">
					<img
						src="https://www.premierpress.com/wp-content/uploads/2019/03/Adidas-Cookies-and-Cream-Website-Banner-Image-with-Fade.jpg"
						class="d-block w-100" style="height: 500px;">
				</div>
				<div class="carousel-item active">
					<img
						src="https://demo.clipmydeals.com/9/wp-content/uploads/2024/02/adidas_banner-min.jpg"
						class="d-block w-100" style="height: 500px;">
				</div>
				<div class="carousel-item">
					<img
						src="https://jdesblog.s3.amazonaws.com/wp-content/uploads/2024/08/09_Blog_Header-Banner_Lala_1376x467.jpg"
						class="d-block w-100" style="height: 500px;">
				</div>
			</div>
			<button class="carousel-control-prev" type="button"
				data-bs-target="#carouselExampleControls" data-bs-slide="prev">
				<span class="carousel-control-prev-icon" aria-hidden="true"></span>
				<span class="visually-hidden">Previous</span>
			</button>
			<button class="carousel-control-next" type="button"
				data-bs-target="#carouselExampleControls" data-bs-slide="next">
				<span class="carousel-control-next-icon" aria-hidden="true"></span>
				<span class="visually-hidden">Next</span>
			</button>
		</div>

		<section class="featured-products container my-5">
			<h3 class="text-center mb-4" style="color: #31363F;">Sản phẩm
				nổi bật</h3>
			<div class="row">
				<div class="d-flex justify-content-center">
					<div class="product-card text-center position-relative mx-2">
						<img src="" class="product-img mx-auto mt-2" alt="Product Image"
							loading="lazy">

						<div class="product-info">
							<h6 class="product-category" style="color: #76ABAE;"></h6>
							<h6 class="product-name text-dark">Samba OG</h6>
							<h5 class="product-price text-dark fw-bold ms-2">1,200,000₫</h5>

							<!-- Nội dung hover -->
							<div class="hover-content">
								<button class="btn btn-outline-dark mb-2">Xem chi tiết</button>
								<button class="btn btn-outline-dark">Thêm vào yêu thích</button>
							</div>
						</div>
					</div>
				</div>
			</div>

		</section>

		<div class="container mb-5">
			<!-- discount -->
			<section class="container my-4">
				<div class="banner text-center py-3">
					<img
						src="https://blog.jd-sports.com.au/wp-content/uploads/2024/09/Desktop_Top_Banner_1920x840.jpg"
						alt="Khuyến mãi đặc biệt"
						style="width: 100%; max-height: 250px; object-fit: cover; margin-bottom: 1rem;">
					<h2 style="font-size: 2rem; margin-bottom: 0.5rem; color: #31363F;">Khuyến
						mãi đặc biệt</h2>
					<p style="color: #31363F;">Nhận ngay giảm giá lên đến 30% cho
						tất cả các sản phẩm!</p>
					<a href="#" class="btn btn-light text-dark">Xem chi tiết</a>
				</div>
			</section>
			<!-- sản phẩm yêu thích -->
			<div th:each="brand : ${brands}">
				<h4 class="text-center mb-4" style="color: #31363F;"
					th:text="${brand.name}"></h4>

				<div id="product-list-${brand.name}"
					class="row row-cols-1 row-cols-md-4 g-4 mb-5">
					<div class="col" th:each="product : ${brandProductMap[brand.name]}">
						<div class="product-card text-center position-relative">
							<img th:src="@{${product.image}}"
								class="product-img mx-auto mt-2" alt="Product Image"
								loading="lazy">
							<div class="product-info">
								<h6 class="product-name" th:text="${product.name}"></h6>
								<div class="hover-content">
									<a href="product_detail.html" class="btn btn-outline-dark mb-2">Xem
										chi tiết</a> <a class="btn btn-outline-dark">Thêm vào yêu
										thích</a>
								</div>
							</div>
						</div>
					</div>
				</div>

				<!-- "Xem thêm" button -->
				<div th:if="${productCountMap[brand.name]} > 4" class="text-center">
					<button class="btn btn-dark more"
						th:id="'load-more-btn-' + ${brand.name}" th:data-offset="4"
						th:data-brand="${brand.name}">Xem thêm</button>
				</div>
			</div>


			<!-- banner -->
			<div class="carousel-inner mb-4">
				<div class="carousel-item active">
					<img
						src=" https://m.media-amazon.com/images/S/aplus-media-library-service-media/bc5c2006-c77e-4287-9929-6739cb8b7ef2.__CR0,0,1464,600_PT0_SX1464_V1___.jpg"
						class="d-block w-100" alt="..."
						style="max-height: 400px; object-fit: cover;">
				</div>
			</div>
			<!-- sản phẩm liên quan -->


			<!-- liên hệ - hỗ trợ -->
			<div class="d-flex justify-content-center">
				<div class="col-md-6 mb-4 mx-2">
					<h5 class="fw-bold" style="color: #31363F;">Liên hệ với chúng
						tôi</h5>
					<p>Điền email và nội dung bạn muốn gửi:</p>
					<form action="#" method="POST">
						<div class="mb-3">
							<label for="contactEmail" class="form-label">Email của
								bạn</label> <input type="email" class="form-control" id="contactEmail"
								placeholder="Nhập email của bạn" required>
						</div>
						<div class="mb-3">
							<label for="contactMessage" class="form-label">Nội dung
								tin nhắn</label>
							<textarea class="form-control" id="contactMessage" rows="4"
								placeholder="Nhập nội dung tin nhắn của bạn" required></textarea>
						</div>
						<button type="submit" class="btn btn-dark">Gửi tin nhắn</button>
					</form>
				</div>
				<div class="col-md-6 mb-4 mx-2">
					<img
						src="https://hires.vn/cdn-cgi/imagedelivery/1m1rJdJLBoJbXbtIvke6Fg/cb194309-3083-4504-ad6e-f40863609c01/public"
						style="width: 650px; border-radius: 20px;">
					<p></p>
				</div>
			</div>
		</div>

	</div>

	<div th:replace="fragment/header_footer :: footer"></div>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
		crossorigin="anonymous">
		
	</script>

	<script>
    
	document.querySelectorAll('.btn-dark.more').forEach(function (button) {
	    button.addEventListener('click', function () {
	        const button = this;
	        const offset = parseInt(button.getAttribute('data-offset'));
	        const brandName = button.getAttribute('data-brand');

	        // Gửi yêu cầu AJAX để tải thêm sản phẩm
	        fetch(`/conan/loadMoreProducts?brandName=${brandName}&offset=${offset}`)
	            .then(response => response.json())
	            .then(products => {
	                // Thêm các sản phẩm mới vào danh sách
	                const productList = document.getElementById(`product-list-${brandName}`);
	                products.forEach(product => {
	                    const productCard = `
	                        <div class="col">
	                            <div class="product-card text-center position-relative">
	                                <img src="${product.image}" class="product-img mx-auto mt-2" alt="Product Image" loading="lazy">
	                                <div class="product-info">
	                                    <h6 class="product-name">${product.name}</h6>
	                                    <div class="hover-content">
	                                        <a href="product_detail.html" class="btn btn-outline-dark mb-2">Xem chi tiết</a>
	                                        <a class="btn btn-outline-dark">Thêm vào yêu thích</a>
	                                    </div>
	                                </div>
	                            </div>
	                        </div>
	                    `;
	                    productList.insertAdjacentHTML('beforeend', productCard);
	                });

	                // Cập nhật offset và ẩn nút nếu đã tải hết sản phẩm
	                button.setAttribute('data-offset', offset + 4);
	                if (products.length < 4) {
	                    button.style.display = 'none';  // Ẩn nút "Xem thêm" nếu không còn sản phẩm
	                }
	            })
	            .catch(error => console.error('Error loading more products:', error));
	    });
	});



</script>
</body>
</html>